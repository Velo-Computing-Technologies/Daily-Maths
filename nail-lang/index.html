<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>NailLang Test</title>
<style>
body { font-family: Arial; background:black; color:white; text-align:center; }
#quiz { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:black; justify-content:center; align-items:center; flex-direction:column; }
button { padding:10px 20px; margin:10px; }
input { padding:10px; font-size:18px; }
</style>
</head>
<body>

<h1>NailLang Test</h1>
<button onclick="start()">Start Quiz</button>
<div id="stats"></div>

<div id="quiz">
<button onclick="exit()">X</button>
<h2 id="question">Loading...</h2>
<input id="answer">
<button onclick="submit()">Submit</button>
<div id="result"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const supabase = window.supabase.createClient(
  "https://lqkpxervwakucksrnoss.supabase.co",
  "sb_publishable_Sdi0YJz0IPwK9yV-0tLvCw_9IDZQhD8"
);

let current=null;
let total=0;
let correct=0;

document.addEventListener("keydown",(e)=>{
 if(e.key==="Escape") exit();
});

function start(){
 document.getElementById("quiz").style.display="flex";
 load();
}

function exit(){
 document.getElementById("quiz").style.display="none";
}

async function load(){
 const { data, error } = await supabase
  .from("nail_vocab_quiz")
  .select("*")
  .limit(1);

 if(error){
  document.getElementById("question").textContent="ERROR: "+error.message;
  return;
 }

 if(!data || data.length===0){
  document.getElementById("question").textContent="No questions in table.";
  return;
 }

 current=data[0];
 document.getElementById("question").textContent=current.question;
 document.getElementById("answer").value="";
 document.getElementById("result").textContent="";
}

function submit(){
 if(!current) return;

 const userAnswer=document.getElementById("answer").value.trim();
 if(!userAnswer) return;

 total++;

 if(userAnswer.toLowerCase()===current.answer.toLowerCase()){
  correct++;
  document.getElementById("result").textContent="Correct";
 } else {
  document.getElementById("result").textContent="Incorrect: "+current.answer;
 }

 document.getElementById("stats").textContent=
  "Total: "+total+" | Correct: "+correct;

 setTimeout(load,800);
}
</script>

</body>
</html>

